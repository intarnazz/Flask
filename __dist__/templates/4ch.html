{% extends 'base.html' %} {% block link -%} {{ super() }}<link rel="stylesheet" href="{{ url_for( 'static', filename='css/reset.css' ) }}"><link rel="stylesheet" href="{{ url_for( 'static', filename='css/style-4ch.css' ) }}">{% endblock link -%} {%- block nav -%} {{ super() }}<div id="header" class="header"><div class="logo"><img src="{{ url_for( 'static', filename='img/ch-monika.png' ) }}" class="logo__img" alt="monika"><h1 class="logo__title">4-ch</h1></div>{% block tredcreate %}<div class="create_tred"><div class="posting-form__text">Форма создания треда</div><form action="/tredcreate" method="POST"><p><label>Укажите тему доски:</label></p><p><input type="text" name="tred_name"></p><p><input type="submit" class="form-batton" value="Создать доску"></p></form></div>{% endblock tredcreate %}<div class="posting-form"><div class="posting-form__text">Форма постинга</div>{% block form_action %}<form action="/4ch" method="POST" class="form-posting" enctype="multipart/form-data">{% endblock form_action %}<p><textarea class="textarea" name="text-tread" cols="57" rows="6" autofocus></textarea></p><p><input type="submit" class="form-batton" value="Отправить"></p><p><input class="form-batton" type="file" name="image" id="image"></p></form></div><img class="header__gif" src="{{ url_for( 'static', filename='img/gif/' + gif + '.gif' ) }}" alt="gif"></div>{%- endblock nav -%} {%- block content -%}<div class="main"><div class="left-menu">опциональная информация для анонов:<br><br>Подрерживаем форматы:<ul class="left-menu__ul"><li>.png</li><li>.jfif</li><li>.jpg</li><li>.mp4</li><li>.webm</li></ul></div><div id="tered-section" class="tered-section">{% for i in tred %}<div class="block__post"><div class="out_post"><div class="boc">...</div><div class="post">{% if i.tred_true != None and title == '4ch' %}<div class="annon-info"><span class="post__id">{{ i.post_id }}</span> Тред:</div><div class="post__content">{% if i.img != None %}<!-- ссылка на тред --> <a class="post-img-link" href="{{ url_for('image_route', post_id=i.post_id, tred=tred_name) }}" target="_blank"><img class="post_img" src="{{ url_for('image_route', post_id=i.post_id, tred=tred_name) }}" alt="Image"> </a>{% endif %} <a href="{{ i.tred_true }}">{{ i.post }}</a></div>{% else %}<!-- пост --><div class="annon-info"><span class="post__id">{{ i.post_id }}</span> Аноним:</div><div class="post__content">{% if i.img != None and (i.type == 'jpeg' or i.tred_true == 'jpeg') %} <a class="post-img-link" href="{{ url_for('image_route', post_id=i.post_id, tred=tred_name) }}" target="_blank"><img class="post_img" src="{{ url_for('image_route', post_id=i.post_id, tred=tred_name) }}" alt="Image"> </a>{% elif i.img != None and ((i.type == 'mp4' or i.tred_true == 'mp4') or (i.type == 'webm' or i.tred_true == 'webm') ) %}<video id="vid" onclick="videoOn('{{i.post_id}}')" autoplay muted class="post_video" type="video/mp4" loop><source src="{{ url_for('image_route', post_id=i.post_id, tred=tred_name) }}" type="video/mp4"></video><div id="video_play_{{ i.post_id }}" class="video_play_block draggable"><video id="video_{{ i.post_id }}" controls class="post_video video_play video_arr" type="video/mp4" loop><source src="{{ url_for('image_route', post_id=i.post_id, tred=tred_name) }}" type="video/mp4"></video></div><!-- muted autoplay controls --> {% endif %} {{ i.post }}</div>{% endif %}</div></div></div>{% endfor %}<!-- сокет --></div>{%- endblock content -%} {% block script %} {{ super() }}<script src="{{ url_for( 'static', filename='js/socket.js' ) }}"></script><script src="{{ url_for( 'static', filename='js/script-4ch.js' ) }}"></script>{% endblock script %} {% block script_socket %}<script>'use strict';
        let socket = io.connect('{{ nav[0] }}');
        socket.on('posts', function (message) {
        let teredSection = document.getElementById('tered-section');
        let div = document.createElement('div');
        div.className = 'block__post';
        div.innerHTML = message;
        teredSection.appendChild(div);
        scroll_down();
        newVideoInit();
        });</script>{% endblock script_socket %}</div>